"""
module_site_visit.utils.cloudinary_version

Robust helper to return the installed cloudinary package version.
Use this instead of accessing cloudinary.version directly.
"""
try:
    # Python 3.8+
    from importlib.metadata import version as _get_version
except Exception:
    try:
        import pkg_resources as _pkgres
        def _get_version(name): return _pkgres.get_distribution(name).version
    except Exception:
        _get_version = None

def get_cloudinary_version():
    # Primary: use importlib.metadata/pkg_resources
    if _get_version:
        try:
            return _get_version('cloudinary')
        except Exception:
            pass
    # Fallback: read known attributes from the module
    try:
        import cloudinary
        return getattr(cloudinary, '__version__', None) or getattr(cloudinary, 'VERSION', None)
    except Exception:
        return None